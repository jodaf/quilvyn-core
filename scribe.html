<!-- $Id: scribe.html,v 1.54 2007/07/19 06:26:38 Jim Exp $ -->
<!--
The Scribe Character Editor is Copyright 2005, James J. Hayes

This program is free software; you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation; either version 2 of the License, or (at your option)
any later version.

This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
more details.

You should have received a copy of the GNU General Public License along
with this program; if not, write to the Free Software Foundation, Inc., 59
Temple Place, Suite 330, Boston, MA 02111-1307 USA.
-->
<html>

<head>

<title>Scribe Program Window</title>

<script>
<!--

/*
 * These definitions determine where your browser looks for the Scribe source
 * files; the values below direct it to retrieve local copies.  If you change
 * the second line to read "var SOURCE_URL = SCRIBE_HOME;", then all other
 * Scribe source files will be downloaded from the Scribe web site each time
 * the program runs.  If you make this change you automatically get software
 * updates every time you run the program; however, the disadvantage is that
 * you have to wait for the code to download each time.
 */
var SCRIBE_HOME = 'http://www.jodaf.com/software/scribe/';
var SOURCE_URL = '';

/*
 * A few user preferences you may want to change: the background color for
 * Scribe's windows, features of the editor and character sheet windows, the
 * number of recent opens shown in the file menu, the prefix and suffix used to
 * expand abbreviated character file urls, and whether or not to warn when
 * you're about to lose changes made to the current character because you're
 * opening a new one.
 */
var BACKGROUND = 'wheat';
var FEATURES_OF_EDIT_WINDOW =
  'height=750,width=500,menubar,resizable,scrollbars';
var FEATURES_OF_SHEET_WINDOW =
  'height=750,width=750,menubar,resizable,scrollbars';
var MAX_RECENT_OPENS = 40;
var URL_PREFIX = 'http://www.jodaf.com/dnd/bt/';
var URL_SUFFIX = '.html';
var WARN_ABOUT_DISCARD = true;

/*
 * Scribe incorporates the modules listed in CUSTOMIZATION_URLS as part of its
 * initial loading; you should uncomment those elements that you want to make
 * part of your Scribe installation and comment or delete the ones you don't
 * want.  If any of the elements of CUSTOMIZATION_URLS begins with a question
 * mark (e.g., '?DMG35.js'), Scribe will prompt the user on start-up to ask
 * whether to include the rules from that module.  This can be useful for rules
 * that you use occasionally but don't want always present.  For example, you
 * might want to put a question mark before DMG35.js to occasionally use the
 * rules to define NPC- or prestige-class NPCs.  null elements are ignored, so
 * the null value at the end of the array makes it easy to add and remove
 * elements without worrying about a trailing comma.
 */
var CUSTOMIZATION_URLS = [
  'PH35.js',
  '?DMG35.js',
  // 'MN2E.js',
  // 'MN2EPrestige.js',
  // 'Eberron.js',
  // 'CustomDeities.js',
  // 'CustomGoodies.js',
  // 'CustomSkills.js',
  // 'SpellPoints.js',
  // 'CompactSheet.js',
  // 'VerticalSheet.js',
  null
];

/*
 * If this file defines a CustomizeScribe function, Scribe calls it after
 * loading, allowing you to add custom behavior to the program.  See
 * scribedoc.html for details.  The default implementation below can be used
 * without modification or can be tailored for your installation.
 */
function CustomizeScribe() {
  // The first part of this implementation provides an easy way to define
  // subfeats and subskills (e.g., Weapon Focus (Longsword)), Perform (Sing))
  // in the PH35 rule set.  Each element of the subfeats/subskills variables
  // gives a feat/skill, followed by a colon and a slash-delimited list of
  // subfeat targets.  Modify the values in each list to determine which
  // subfeats/subskills are defined in your Scribe installation.
  var subfeats = [
    'Greater Spell Focus:' + PH35.SCHOOLS.join('/').replace(/:[^\/]+/g, ''),
    'Greater Weapon Focus:',
    'Greater Weapon Specialization:',
    'Improved Critical:Dwarven Waraxe/Longsword',
    'Skill Focus:',
    'Spell Focus:' + PH35.SCHOOLS.join('/').replace(/:[^\/]+/g, ''),
    'Weapon Focus:Dwarven Waraxe/Longsword',
    'Weapon Specialization:Dwarven Waraxe/Longsword'
  ];
  var subskills = [
    'Craft:',
    'Knowledge:Arcana/Architecture/Dungeoneering/Engineering/Geography/' +
              'History/Local/Nature/Nobility/Planes/Religion',
    'Perform:Act/Comedy/Dance/Keyboard/Oratory/Percussion/Sing/String/Wind',
    'Profession:'
  ];
  for(var i = 0; i < subfeats.length; i++) {
    var pieces = subfeats[i].split(/:/);
    PH35.SUBFEATS[pieces[0]] = pieces[1];
  };
  for(var i = 0; i < subskills.length; i++) {
    var pieces = subskills[i].split(/:/);
    PH35.SUBSKILLS[pieces[0]] = pieces[1];
  };
  // The remaining lines load the modules listed in CUSTOMIZATION_URLS by
  // calling a function with the same name as the module (e.g., it calls PH35()
  // for PH35.js).
  for(var i = 0; i < CUSTOMIZATION_URLS.length; i++) {
    var url = CUSTOMIZATION_URLS[i];
    var pos;
    if(url == null)
      continue;
    var func = url;
    if((pos = func.lastIndexOf('/')) >= 0)
      func = func.substring(pos + 1);
    if((pos = func.indexOf('.')) >= 0)
      func = func.substring(0, pos);
    if(window[func] == null)
      alert('Unable to invoke ' + func + ' from ' + url);
    else
      window[func]();
  }
}

/**** Commands that load the Scribe software.  Do not modify. ****/

var CLOSE_TAG = '<' + '/' + 'script>\n';
var HELP_URL = SOURCE_URL + 'scribedoc.html';
var LOGO_URL = SOURCE_URL + 'scribe.gif';
var scribeUrls = [
  'Input.js', 'ObjectViewer.js', 'RuleEngine.js', 'ScribeUtils.js', 'Scribe.js',
  'ScribeRules.js'
].concat(CUSTOMIZATION_URLS);

for(var i = 0; i < scribeUrls.length; i++) {
  var url = scribeUrls[i];
  if(url == null)
    continue;
  if(url.match(/\w+:/) == null)
    url = SOURCE_URL + url;
  if(url.substring(0, 1) == '?') {
    url = url.substring(1);
    if(!confirm('Use rules from ' + url + '?')) {
      url = null;
    }
    CUSTOMIZATION_URLS[i - scribeUrls.length + CUSTOMIZATION_URLS.length] = url;
    if(url == null)
      continue;
  }
  document.write('<script src="' + url + '">' + CLOSE_TAG);
}

-->
</script>

</head>
<body onload="document.bgColor=BACKGROUND;Scribe();">

<script>
  document.write('<img src="' + LOGO_URL + '"/><br/>');
</script>
Scribe is running from this window.  Please leave it open until you are done
using Scribe.

</html>
